# Cultivation Mechanics

## Table of Contents
- [Overview](#overview)
- [Cultivation Tiers](#cultivation-tiers)
- [Tier Groupings and Major Thresholds](#tier-groupings-and-major-thresholds)
- [Qi Compression and Tier-Ups](#qi-compression-and-tier-ups)
- [Tribulations](#tribulations)
- [Cultivation Progression](#cultivation-progression)
- [Stat and Ability Effects](#stat-and-ability-effects)
- [Lifespan and Immortality](#lifespan-and-immortality)

## Overview

Cultivation is the process by which cultivators (NPCs and players with `mortal_class = 'cultivator'`) absorb, refine, and compress Qi to increase their power and transcend mortal limitations. Cultivation progresses through 50 tiers, each requiring the cultivator to double their Qi capacity before advancing.

**Key Principles:**
- **Qi Compression**: Each tier-up requires doubling the amount of Qi the cultivator's core can hold
- **Tribulations**: Every major breakthrough triggers a Heavenly Tribulation that tests mind, body, and spirit
- **Failure Consequences**: Failed tribulations can result in stagnation, injury, cultivation deviation, or death
- **Personalized Challenges**: Tribulations are tailored to the cultivator's attunement, karma, and cultivation path

---

## Cultivation Tiers

The cultivation system consists of 50 tiers, organized into major groupings. Individual tiers within groups share similar characteristics, with key thresholds marking significant power increases.

### Tier Groupings

#### **Mortal Foundation (Tiers 1-4)**
Cultivators gain Qi sensitivity and basic cultivation abilities, but remain biologically mortal.

#### **Elemental Mastery & Conceptual Awakening (Tiers 5-9)**
Cultivators choose their primary Qi attunement and develop their first Concept.

#### **Domain Expansion & Multi-Qi Integration (Tiers 10-14)**
Cultivators learn to harmonize multiple Qi types and manipulate the external world.

#### **Immortality & Planetary Influence (Tiers 15-19)**
Cultivators achieve functional immortality and begin influencing planetary Qi.

#### **Cosmic Terraformers & World Architects (Tiers 20-29)**
Cultivators gain the ability to shape planets and travel between dimensions.

#### **Multiversal Influence & Ascension (Tiers 30-40)**
Cultivators can manipulate realities and prepare for ascension to higher realms.

#### **Celestial Challenge (Tiers 41-49)**
Cultivators face Heavenly Overseers and prove worthiness for Imperial-level influence.

#### **Ultimate Tier (Tier 50)**
The Emperor's Throne - only one Tier 50 can exist in the Empire at a time.

---

## Tier Groupings and Major Thresholds

### Mortal Foundation (Tiers 1-4)

**Theme:** "*Before you can cultivate Qi, you must prove you are worthy of wielding it.*"

Cultivators gain Qi sensitivity, but their bodies and minds are still fragile.

#### Tier 1: Initiate of the Path
- **Gains Basic Qi Sensitivity** → Can sense and manipulate ambient Qi
- **Learns to refine and absorb Qi** into their core
- **Starting Point**: First step on the cultivation path

#### Tier 2: Qi Channeler
- **Can actively channel Qi** to enhance physical and mental abilities
- **Begins refining Qi** into their first attunement
- **Enhancement**: Physical and mental stats improve

#### Tier 3: Spiritual Awakening
- **Can perceive ley-lines and Qi nodes**
- **Begins to sense and communicate with spirits**
- **Awareness**: Spiritual perception expands

#### Tier 4: Qi Novice
- **Learns to refine Qi Crystals**
- **Attunement fully stabilizes** → Can now cultivate more efficiently
- **Foundation Complete**: Ready for elemental specialization

**Tribulation:** Internal Refinement
- Test of Willpower & Endurance
- Must overcome mental, emotional, and physical suffering
- Sensory deprivation, hallucinations, and Qi poisoning

**Failure Consequences:**
- Weakened Qi Sensitivity → Cultivation slows
- Core Instability → Future tier-ups become harder
- Severe Failure: Shattered Meridians, Cultivation Deviation, or Death

---

### Elemental Mastery & Conceptual Awakening (Tiers 5-9)

**Theme:** "*Qi must not only be controlled—it must be understood.*"

Cultivators refine their first personal Concept, aligning with a unique attunement.

#### Tier 5: Adept of the Path
- **Chooses a primary Qi attunement** (Fire, Water, Life, Death, etc.)
- **Begins shaping their first Concept** (a guiding principle that enhances cultivation)
- **Specialization Begins**: Cultivator commits to an elemental path

#### Tiers 6-9: Elemental Specialist
- **Mastery over attunement increases**
- **Qi flows can now affect the external world** more directly
- **Concept strengthens**, guiding cultivation path
- **Progressive Mastery**: Each tier increases elemental control and power

**Tribulation:** Elemental Trial
- Must face their own Qi as a force of nature
- **Environmental Stress Test**: A fire cultivator is trapped in an inferno, a water cultivator is crushed under oceanic pressure
- **Karmic Repercussions**: Cultivators who abused their element face harsher tribulation

**Failure Consequences:**
- Qi Backlash → Internal injuries or permanent elemental rejection
- Conceptual Failure → Concept becomes unstable or permanently stunted
- Severe Failure: Burned-out Qi Core, Forced Elemental Shift, or Death

---

### Domain Expansion & Multi-Qi Integration (Tiers 10-14)

**Theme:** "*To control Qi is one thing. To weave multiple forces together is another.*"

Cultivators harmonize multiple Qi types, allowing greater control over the world.

#### Tier 10: Qi Harmonizer
- **Mastery of multiple elements**
- **Concept solidifies** → Becomes part of their cultivation identity
- **Harmony Achieved**: Can balance opposing forces

#### Tiers 11-14: Master of Qi
- **Can now manipulate Void and Essence Qi**
- **Capable of terraforming**, large-scale Qi applications, and ley-line manipulation
- **World Influence**: Can affect environments on a regional scale

**Tribulation:** Harmonic Disruption
- Conflicting Qi must be harmonized
- Must maintain balance between opposing forces (Fire vs. Water, Life vs. Death)
- Failure results in internal Qi turbulence, causing unpredictable power surges

**Failure Consequences:**
- Loss of Elemental Control → One attunement may become unstable or unusable
- Core Fracturing → Qi efficiency drops, making cultivation harder
- Severe Failure: Cultivation Regression, Unstable Qi, or Death

---

### Immortality & Planetary Influence (Tiers 15-19)

**Theme:** "*The first threshold of true power is the power over one's own mortality.*"

At Tier 15, cultivators achieve functional immortality and begin influencing planetary Qi.

#### Tier 15: Eternal Sage
- **Gains functional immortality**
- **Fully transcends human limitations**
- **Immortality Threshold**: No longer ages, contracts disease, or experiences biological decline
- **Body Transformation**: Body becomes more Qi than flesh

#### Tiers 16-19: Planetary Guardian
- **Can manipulate planetary Qi**, control environments, and terraform
- **Begins acting as a guardian of a world**
- **Mental Rigidity**: Personality, habits, and worldview become increasingly difficult to change
- **Transformation Difficulty**: Self-improvement becomes harder, requiring dedicated training

**Tribulation:** Self-Transcendence
- Relive greatest failures and overcome them
- Body transformation begins—Qi replaces flesh
- Some lose their sense of self, becoming unstable

**Failure Consequences:**
- Partial Immortality → Cultivator may age slowly but still die
- Mental Collapse → Some lose their willpower or cultivation path
- Severe Failure: Permanent Damage, Forced Attunement Shift, or Death

---

### Cosmic Terraformers & World Architects (Tiers 20-29)

**Theme:** "*You have mastered yourself. Now master the world.*"

Cultivators gain the ability to shape planets and travel between dimensions.

#### Tier 20: Manifestation Sage
- **Full control over physical form**
- **Can phase between energy and physical states**
- **Form Mastery**: Can reshape their body at will

#### Tiers 21-29: Void Walker & Architect of the Empire
- **Capable of shaping entire planets**
- **Masters interdimensional travel**
- **World Shaping**: Can terraform and restructure planetary environments
- **Dimensional Mastery**: Can create and navigate pocket dimensions

**Tribulation:** Planetary Resonance
- Must stabilize a planet undergoing chaotic Qi shifts
- Ley-line ruptures, elemental chaos, and massive Qi surges test their abilities

**Failure Consequences:**
- Ley-Line Rejection → Unable to interface with planetary Qi
- Qi Collapse → Regression in cultivation, losing Qi reserves
- Severe Failure: Massive Qi Deviation, Energy Corruption, or Death

---

### Multiversal Influence & Ascension (Tiers 30-40)

**Theme:** "*There is no path forward that does not challenge the very nature of existence.*"

Cultivators can manipulate realities and prepare for ascension to higher realms.

#### Tiers 30-39: Reality Architects & Ascendant Preparer
- **Can manipulate entire realities**
- **Prepares for ascension** into the higher realms
- **Reality Mastery**: Can alter fundamental laws within limited domains
- **Ascension Preparation**: Must prepare for transition to higher planes

**Note:** Some cultivators ascend to Higher Realms at Tier 35+, though few return.

#### Tier 40: The Ascension Threshold
- **Empire pressures cultivators to ascend**
- Cultivators who remain are often employed in high-level Imperial roles
- **Presence Effects**: Their presence alone affects Qi density, requiring power suppression

**Tribulation:** Reality Trial
- Thrown into alternate realities
- Must interact with different versions of themselves (those who succeeded, failed, or never existed)

**Failure Consequences:**
- Dimensional Instability → Future ascensions become unpredictable
- Multiversal Karma Shift → Affects their fate permanently
- Severe Failure: Locked in a Fragmented Timeline, Forced Service to the Heavens, or Death

---

### Celestial Challenge (Tiers 41-49)

**Theme:** "*The Empire no longer asks for loyalty—it demands it.*"

Cultivators face Heavenly Overseers and prove worthiness for Imperial-level influence.

#### Tiers 41-49: Imperial-Tier Cultivators
- **Empire mandates service** for those who remain
- Often serve as sect heads, planetary governors, or multiversal envoys
- **Power Suppression Required**: Must suppress power to avoid destabilizing environments
- **Imperial Law**: Tier 49 cultivators must either ascend or enter Imperial service

**Tribulation:** Celestial Challenge
- Facing **Heavenly Overseers**
- Proving worthiness to influence the Empire at the highest level
- Tests of cosmic responsibility and balance

**Failure Consequences:**
- Forced Ascension → Must leave mortal realms
- Imperial Service → Must serve the Empire in specified roles
- Severe Failure: Exile, Cultivation Lock, or Death

---

### Ultimate Tier (Tier 50)

**Theme:** "*There can only be one.*"

The Emperor's Throne - the ultimate power in the Empire.

#### Tier 50: The Emperor's Throne
- **Can no longer remain in lower realms** without destabilizing reality
- **Their existence pulls Qi flows out of balance**
- **Automatic Ascension**: If unfocused for even a moment, will automatically ascend
- **Empire Limit**: Only one Tier 50 can exist—the Emperor

**Imperial Succession:**
- Emperor rules for 40,000 standard years before ascending or being replaced
- New Emperor chosen from highest-tier cultivators
- Must pass the "Emperor's Tribulation"
- Failure results in death or loss of cultivation

**Special Rules:**
- When Emperor ascends, a new Tier 50 is crowned
- All other Tier 49+ candidates must ascend as well
- Prevents factional wars among the most powerful beings

---

## Qi Compression and Tier-Ups

### Qi Compression Requirement

**Core Rule:**
```
Each tier-up requires doubling the amount of Qi the cultivator's core can hold.

qi_capacity_for_next_tier = current_qi_capacity * 2
```

**Example:**
- Tier 1: qi_capacity = 100
- Tier 2: qi_capacity = 200 (doubled)
- Tier 3: qi_capacity = 400 (doubled again)
- Tier 4: qi_capacity = 800 (doubled again)

**Progression:**
- Each tier requires exponentially more Qi
- Higher tiers take significantly longer to reach
- Cultivators must accumulate Qi through absorption, cultivation, and refinement

### Tier-Up Process

1. **Qi Accumulation:**
   - Cultivator absorbs Qi from ambient environment
   - Qi is stored in `qi_pool` (current Qi) and `qi_capacity` (maximum Qi)
   - Must fill `qi_pool` to at least `qi_capacity * 1.5` to attempt breakthrough

2. **Breakthrough Attempt:**
   - Cultivator initiates tier-up process
   - System checks if `qi_pool >= qi_capacity * 1.5`
   - System checks if ambient qi is sufficient (threshold varies by tier)

3. **Tribulation Trigger:**
   - If conditions met, Heavenly Tribulation is triggered
   - Tribulation is personalized based on cultivator's attunement, karma, and path

4. **Success or Failure:**
   - **Success**: Tier increases, `qi_capacity` doubles, stats may improve
   - **Failure**: Consequences vary (see Tribulation section)

---

## Tribulations

### Overview

Tribulations are Heavenly challenges that test a cultivator's worthiness when attempting to advance. They are not punishments, but rather cosmic tests that ensure balance and prevent reckless power accumulation.

**Key Principles:**
- **Personalized**: Each tribulation is tailored to the cultivator's attunement, karma, and cultivation path
- **Unavoidable**: Attempts to bypass tribulation result in more severe backlash
- **Escalating**: Higher tiers face increasingly difficult tribulations
- **Failure Consequences**: Vary from minor setbacks to death

### The Heavens' Three Principles of Judgment

The Heavens operate under three immutable laws when determining tribulation severity:

#### 1. The Law of Balance
"*Nothing is given freely; power demands an equivalent price.*"

- The greater the power sought, the more The Heavens demand in return
- Those who rush cultivation, consume excessive resources, or cultivate recklessly face harsher tribulations
- Example: A cultivator who skyrockets to Tier 10 without foundational training faces uncontrollable Qi surges

#### 2. The Law of Karma
"*The path one walks determines the challenges one faces.*"

- The Heavens remember a cultivator's past actions, betrayals, and sacrifices
- Those who use dishonorable techniques, betray oaths, or exploit others face tribulations that punish their weaknesses
- Example: A rogue cultivator who stole techniques from their master must fight a perfect copy of their master

#### 3. The Law of Attunement
"*Power that is not mastered is power that is borrowed.*"

- Each tribulation reflects the cultivator's primary Qi attunement
- A cultivator who hasn't mastered their element faces situations where their power works against them
- Example: A Water Qi cultivator who only used calm streams is tested in a tsunami

### Tribulation Themes by Tier Range

| Tier Range | Tribulation Theme | Core Challenge |
|------------|------------------|----------------|
| **1-4** | *Internal Refinement* | Overcoming physical, mental, and spiritual strain to prove Qi compatibility |
| **5-9** | *Elemental Mastery* | Facing one's own Qi as a force of nature, proving mastery over first Concept |
| **10-14** | *Harmonic Disruption* | Integrating multiple Qi types, preventing internal collapse or imbalance |
| **15-19** | *Self-Transcendence* | Achieving functional immortality, facing karmic echoes of past choices |
| **20-29** | *Planetary Resonance* | Stabilizing planetary-scale Qi, proving ability to influence ley-lines |
| **30-40** | *Reality Trial* | Testing understanding of reality, time, and multiversal influence |
| **41-49** | *Celestial Challenge* | Facing Heavenly Overseers, proving worthiness for Imperial-level influence |

### Tribulation Mechanics

**Trigger Conditions:**
- Cultivator must have `qi_pool >= qi_capacity * 1.5`
- Ambient qi must be above threshold (varies by tier)
- Cultivator must be in suitable location (varies by tier)

**Tribulation Types:**
- **Internal Tribulations**: Mental, physical, and spiritual challenges within the cultivator
- **External Tribulations**: Environmental challenges, elemental trials, or combat scenarios
- **Karmic Tribulations**: Facing past actions, betrayals, or unresolved conflicts
- **Reality Tribulations**: Testing understanding of reality, time, and existence

**Failure Severity:**
- **Minor Failure**: Qi deviation, cultivation injuries, stagnation
- **Moderate Failure**: Weakened abilities, core instability, cultivation regression
- **Major Failure**: Crippled cultivation, shattered cores, forced attunement shift
- **Severe Failure**: Death, cultivation deviation, or permanent damage

**Success Benefits:**
- Tier increases
- `qi_capacity` doubles
- Stats may improve
- New abilities unlocked
- Deeper attunement and refined cultivation path
- Unique insights or transformations

---

## Cultivation Progression

### Progression Rate

Cultivation speed depends on:
- **Ambient Qi Level**: Higher local ambient qi = faster absorption
- **Cultivation Level**: Higher levels require exponentially more Qi
- **Cultivation Efficiency**: Based on spirit_power, willpower, clarity, and attunement
- **Resources**: Qi crystals, elixirs, and formations can accelerate cultivation

**Formula:**
```
cultivation_rate = base_absorption_rate * (1 + efficiency_modifiers) * local_ambient_qi_modifier

where:
- base_absorption_rate = 10 + (cultivation_level * 5) [qi units per hour]
- efficiency_modifiers = (spirit_power + willpower + clarity) / 300
- local_ambient_qi_modifier = 0.5 + (local_ambient_qi / 1000) * 0.5
```

### Cultivation Stages

**Early Stage (Tiers 1-4):**
- Focus: Build foundation, gain Qi sensitivity
- Time: Days to months per tier
- Risk: Low (but still dangerous)

**Mid Stage (Tiers 5-14):**
- Focus: Master element, develop Concept, harmonize Qi types
- Time: Months to years per tier
- Risk: Moderate to high

**Late Stage (Tiers 15-29):**
- Focus: Achieve immortality, influence planetary Qi, shape worlds
- Time: Years to decades per tier
- Risk: High (immortality at stake)

**Ascension Stage (Tiers 30-40):**
- Focus: Manipulate realities, prepare for ascension
- Time: Decades to centuries per tier
- Risk: Very high (reality-level challenges)

**Imperial Stage (Tiers 41-50):**
- Focus: Serve Empire, prove worthiness, maintain balance
- Time: Centuries to millennia per tier
- Risk: Extreme (cosmic-level challenges)

---

## Stat and Ability Effects

### How Cultivation Affects Stats

**Core Stats (Body, Mind, Spirit):**
- Increase with each tier (scaling varies by tier range)
- Higher tiers provide larger stat bonuses
- Immortal tiers (15+) provide massive stat increases

**Expanded Stats (Cultivators Only):**
- All expanded stats (strength, endurance, agility, etc.) increase with cultivation
- Higher cultivation = higher stat caps
- Some stats improve more than others based on attunement and cultivation path

**Qi Pool and Capacity:**
- `qi_capacity` doubles with each tier
- `qi_pool` increases through cultivation and absorption
- Higher tiers = exponentially larger Qi reserves

**Skill Progression:**
- Skills can exceed mortal caps
- Higher cultivation = faster skill learning
- Some skills are only available at certain tiers

### Ability Unlocks by Tier

**Tier 1-4:**
- Basic Qi manipulation
- Qi sensing
- Qi crystal refinement (Tier 4+)

**Tier 5-9:**
- Elemental techniques
- Concept-based abilities
- External Qi manipulation

**Tier 10-14:**
- Multi-element harmonization
- Terraforming (small scale)
- Ley-line perception and manipulation

**Tier 15-19:**
- Functional immortality
- Planetary Qi manipulation
- Large-scale terraforming

**Tier 20-29:**
- Physical form control
- Dimensional travel
- Planet shaping

**Tier 30-40:**
- Reality manipulation
- Multiversal influence
- Time manipulation (limited)

**Tier 41-50:**
- Cosmic-level abilities
- Imperial authority
- Ultimate power (Tier 50)

---

## Lifespan and Immortality

### Lifespan by Cultivation Tier

**Mortals (Non-Cultivators):**
- **Lifespan**: 80-300 years (with medicinal enhancements)
- Still subject to aging, disease, and death

**Low-Tier Cultivators (Tiers 1-14):**
- **Lifespan**: 300-3,000 years (depending on tier and Qi efficiency)
- Still biologically mortal—age, require sleep, can be killed
- Life expectancy dramatically increases but remains tied to injuries

**Immortal Cultivators (Tiers 15-24):**
- **Lifespan**: Effectively immortal (but can still be killed)
- No longer age, contract disease, or experience biological decline
- Body becomes more Qi than flesh
- Mental rigidity increases

**High-Tier Cultivators (Tiers 25-39):**
- **Lifespan**: Immortal unless killed
- Capable of terraforming, ley-line manipulation, interdimensional travel
- Presence affects Qi density

**Imperial-Tier Cultivators (Tiers 40-49):**
- **Lifespan**: Immortal, but at risk of spontaneous ascension
- Must suppress power to avoid destabilizing environments
- Empire pressures to ascend or serve

**Tier 50 (Emperor):**
- **Lifespan**: Beyond mortal limits—an entity unto themselves
- Cannot remain in lower realms without destabilizing reality
- Rulership term: 40,000 standard years

### Immortality Mechanics

**Functional Immortality (Tier 15+):**
- No aging, disease, or biological decline
- Can still be killed in battle or through tribulation failure
- Body becomes more Qi than flesh

**Mental Effects:**
- Personality, habits, and worldview become increasingly difficult to change
- Transformation and self-improvement become harder
- Requires dedicated training techniques to change

**Physical Effects:**
- Body becomes more resilient
- Can regenerate from injuries
- May phase between energy and physical states (Tier 20+)

---

## Database Schema Updates

### Fields Needed

**`avatars` and `npcs` tables:**
- `cultivation_level INTEGER DEFAULT 0` - Current cultivation tier (0 = not yet Tier 1)
- `cultivation_experience REAL DEFAULT 0.0` - Progress toward next tier (0.0 to 1.0)
- `qi_capacity REAL DEFAULT 0.0` - Maximum Qi capacity (doubles with each tier)
- `qi_pool REAL DEFAULT 0.0` - Current Qi stored
- `primary_attunement VARCHAR(50)` - Primary Qi attunement (Fire, Water, etc.)
- `cultivation_concept TEXT` - Personal Concept guiding cultivation path
- `last_tribulation_at TIMESTAMP WITH TIME ZONE` - When last tribulation occurred
- `tribulation_count INTEGER DEFAULT 0` - Number of tribulations survived
- `tribulation_failures INTEGER DEFAULT 0` - Number of failed tribulations

---

## Notes

- **Cultivation is not mandatory** - NPCs can remain mortals
- **Cultivation requires resources** - Qi, time, and often external support
- **Tribulations are dangerous** - Many cultivators fail and die
- **Position matters** - Cultivators near qi sources progress faster
- **Karma affects tribulations** - Past actions influence challenge difficulty
- **Attunement specialization** - Each cultivator chooses and develops their path
- **Exponential difficulty** - Higher tiers require exponentially more Qi and time
- **Immortality has costs** - Mental rigidity and responsibility increase

---

**Last Updated:** 2025-11-05

